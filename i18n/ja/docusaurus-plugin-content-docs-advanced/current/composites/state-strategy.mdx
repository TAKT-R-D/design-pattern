import Tabs from "@theme/Tabs";
import TabItem from "@theme/TabItem";
import CodeBlock from "@theme/CodeBlock";

import tsCode from "@site/src/codes/ref-synergy/ts/state-strategy.ts";
import phpCode from "@site/src/codes/ref-synergy/php/state-strategy.php";
import pyCode from "@site/src/codes/ref-synergy/py/state-strategy.py";

# ğŸ§© State Ã— Strategy

## âœ… çµ„ã¿åˆã‚ã›ã®æ„å›³

- çŠ¶æ…‹ã«ã‚ˆã£ã¦å‡¦ç†ã®å¯å¦ã‚„æŒ¯ã‚‹èˆã„ã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹ãŸã‚ã« `State` ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ä½¿ç”¨ã—ã€
- å®Ÿè¡Œã™ã‚‹æˆ¦ç•¥ï¼ˆæ”¯æ‰•æ–¹æ³•ãªã©ï¼‰ã‚’æŸ”è»Ÿã«å·®ã—æ›¿ãˆã‚‹ãŸã‚ã« `Strategy` ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ä½µç”¨ã™ã‚‹

ã“ã®çµ„ã¿åˆã‚ã›ã«ã‚ˆã‚Šã€çŠ¶æ…‹é·ç§»ã¨å‡¦ç†å†…å®¹ã®ä¸¡æ–¹ã‚’åˆ†é›¢ãƒ»æŸ”è»ŸåŒ–ã§ãã‚‹ã€‚

## âœ… ã‚ˆãä½¿ã‚ã‚Œã‚‹ã‚·ãƒ¼ãƒ³

- çŠ¶æ…‹ã«å¿œã˜ã¦æŒ¯ã‚‹èˆã„ã‚’å¤‰ãˆã¤ã¤ã€å…·ä½“çš„ãªå‡¦ç†æ‰‹æ®µï¼ˆã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ï¼‰ã‚‚åˆ‡ã‚Šæ›¿ãˆãŸã„å ´åˆ
- ã€Œç¾åœ¨ã¯æ”¯æ‰•ã§ãã‚‹çŠ¶æ…‹ã‹ï¼Ÿã€ã€Œæ”¯æ‰•æ–¹æ³•ã¯ä½•ã‹ï¼Ÿã€ã¨ã„ã† 2 ã¤ã®è»¸ãŒã‚ã‚‹ã‚ˆã†ãªã‚·ãƒŠãƒªã‚ª
- ä¾‹ï¼šæ±ºæ¸ˆå‡¦ç†ã€ä¼šå“¡ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã«å¿œã˜ãŸæ©Ÿèƒ½åˆ¶å¾¡ã€äºˆç´„å¯å¦ã¨å‡¦ç†æ‰‹æ®µã®åˆ†é›¢ãªã©

## âœ… UML ã‚¯ãƒ©ã‚¹å›³

```mermaid
classDiagram
    class PaymentStrategy {
        +pay(amount: number): void
    }

    class CreditCardPayment {
        +pay(amount: number): void
    }
    class PayPalPayment {
        +pay(amount: number): void
    }

    PaymentStrategy <|.. CreditCardPayment
    PaymentStrategy <|.. PayPalPayment

    class PaymentState {
        +handle(amount: number): void
        +setStrategy(strategy: PaymentStrategy): void
    }

    class ReadyState {
        -strategy: PaymentStrategy
        +handle(amount: number): void
        +setStrategy(strategy: PaymentStrategy): void
    }

    class DisabledState {
        +handle(amount: number): void
        +setStrategy(strategy: PaymentStrategy): void
    }

    PaymentState <|.. ReadyState
    PaymentState <|.. DisabledState

    class PaymentContext {
        -state: PaymentState
        +setState(state: PaymentState): void
        +setStrategy(strategy: PaymentStrategy): void
        +pay(amount: number): void
    }

    PaymentContext --> PaymentState
    ReadyState --> PaymentStrategy
```

## âœ… ã‚³ãƒ¼ãƒ‰ä¾‹

<Tabs groupId="language">
  <TabItem value="ts" label="TypeScript">
    <CodeBlock language="ts">{tsCode}</CodeBlock>
  </TabItem>
  <TabItem value="php" label="PHP">
    <CodeBlock language="php">{phpCode}</CodeBlock>
  </TabItem>
  <TabItem value="python" label="Python">
    <CodeBlock language="python">{pyCode}</CodeBlock>
  </TabItem>
</Tabs>

## âœ… è§£èª¬

- `PaymentContext` ã¯ç¾åœ¨ã®çŠ¶æ…‹ï¼ˆ`PaymentState`ï¼‰ã‚’ä¿æŒã—ã€çŠ¶æ…‹ã«å¿œã˜ãŸå‡¦ç†ã‚’å§”è­²
- `ReadyState` ã¨ `DisabledState` ã¯ `State` ã¨ã—ã¦ã®å½¹å‰²ã‚’æœãŸã—ã€`handle` ãƒ¡ã‚½ãƒƒãƒ‰ã®æŒ¯ã‚‹èˆã„ã‚’çŠ¶æ…‹ã”ã¨ã«å¤‰ãˆã‚‹
- `Strategy`ï¼ˆ`CreditCardPayment`, `PayPalPayment`ï¼‰ã¯ã€æ”¯æ‰•æ–¹æ³•ã®åˆ‡ã‚Šæ›¿ãˆã‚’æ‹…å½“
- å®Ÿè¡Œãƒ•ãƒ­ãƒ¼ï¼š
  - `PaymentContext` ãŒ `ReadyState` ãªã‚‰æ”¯æ‰•æˆ¦ç•¥ã‚’ç”¨ã„ãŸå‡¦ç†ãŒå¯èƒ½
  - `DisabledState` ãªã‚‰æ‹’å¦ã•ã‚Œã‚‹

## âœ… ã¾ã¨ã‚

- **State ãƒ‘ã‚¿ãƒ¼ãƒ³** ã«ã‚ˆã‚Šã€å‡¦ç†ã®å¯å¦ã‚„çŠ¶æ…‹é·ç§»ã®ãƒ­ã‚¸ãƒƒã‚¯ã‚’æ˜ç¢ºã«åˆ†é›¢
- **Strategy ãƒ‘ã‚¿ãƒ¼ãƒ³** ã«ã‚ˆã‚Šã€å¯å¤‰ãªå‡¦ç†ãƒ­ã‚¸ãƒƒã‚¯ï¼ˆæ”¯æ‰•æ–¹æ³•ãªã©ï¼‰ã‚’æŸ”è»Ÿã«åˆ‡ã‚Šæ›¿ãˆå¯èƒ½
- çŠ¶æ…‹ã¨æˆ¦ç•¥ã® 2 è»¸ãŒãã‚Œãã‚Œç‹¬ç«‹ã—ã¦æ‹¡å¼µå¯èƒ½ãªã€ä¿å®ˆæ€§ã®é«˜ã„æ§‹é€ ã¨ãªã‚‹
