import Tabs from "@theme/Tabs";
import TabItem from "@theme/TabItem";
import CodeBlock from "@theme/CodeBlock";

import tsCode from "@site/src/codes/excessive-branching/ts/rfc_command.ts";
import phpCode from "@site/src/codes/excessive-branching/php/rfc_command.php";
import pyCode from "@site/src/codes/excessive-branching/py/rfc_command.py";

# ğŸ§© Command ãƒ‘ã‚¿ãƒ¼ãƒ³

## âœ… è¨­è¨ˆæ„å›³

- å‡¦ç†ãã®ã‚‚ã®ã‚’ã€Œå‘½ä»¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã€ã¨ã—ã¦åˆ‡ã‚Šå‡ºã™
- å‡¦ç†ã‚’è¨˜éŒ²ãƒ»å†å®Ÿè¡Œãƒ»ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒªãƒ³ã‚°ã™ã‚‹ã®ãŒç›®çš„

## âœ… é©ç”¨ç†ç”±

- å®Ÿè¡Œã™ã‚‹å‡¦ç†ã‚’å¤–ã‹ã‚‰æ¸¡ã™ â†’ `execute()`
- **Undo/Redo ã‚„ãƒãƒƒãƒå‡¦ç†**ã«ã‚‚å¿œç”¨ã—ã‚„ã™ã„

## âœ… å‘ã„ã¦ã„ã‚‹ã‚·ãƒ¼ãƒ³

- ãƒ¦ãƒ¼ã‚¶ãƒ¼æ“ä½œã‚„ãƒãƒƒãƒå‡¦ç†ã®ã‚ˆã†ã«ã€**ã€Œå‡¦ç†ã®å±¥æ­´ã€ãŒé‡è¦**
- å‡¦ç†ã®å®Ÿè¡Œã‚’ã€Œé…å»¶ã€ã‚„ã€Œè“„ç©ã€ã—ãŸã„ã¨ã

## âœ… ã‚³ãƒ¼ãƒ‰ä¾‹

<Tabs groupId="language">
  <TabItem value="ts" label="TypeScript">
    <CodeBlock language="ts">{tsCode}</CodeBlock>
  </TabItem>
  <TabItem value="php" label="PHP">
    <CodeBlock language="php">{phpCode}</CodeBlock>
  </TabItem>
  <TabItem value="python" label="Python">
    <CodeBlock language="python">{pyCode}</CodeBlock>
  </TabItem>
</Tabs>

## âœ… è§£èª¬

ã“ã®ã‚³ãƒ¼ãƒ‰ã¯ `Command` ãƒ‘ã‚¿ãƒ¼ãƒ³ ã‚’ä½¿ç”¨ã—ã¦ã€å‰²å¼•è¨ˆç®—ã®ãƒ­ã‚¸ãƒƒã‚¯ã‚’ã‚³ãƒãƒ³ãƒ‰ã¨ã—ã¦ã‚«ãƒ—ã‚»ãƒ«åŒ–ã—ã€å‹•çš„ã«åˆ‡ã‚Šæ›¿ãˆã‚‰ã‚Œã‚‹è¨­è¨ˆã‚’å®Ÿç¾ã—ã¦ã„ã‚‹ã€‚
`Command` ãƒ‘ã‚¿ãƒ¼ãƒ³ã¯ã€æ“ä½œã‚’ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¨ã—ã¦è¡¨ç¾ã—ã€æ“ä½œã®å®Ÿè¡Œã‚’é…å»¶ã•ã›ãŸã‚Šã€ã‚­ãƒ¥ãƒ¼ã«ä¿å­˜ã—ãŸã‚Šã€å–ã‚Šæ¶ˆã—å¯èƒ½ã«ã™ã‚‹ãƒ‡ã‚¶ã‚¤ãƒ³ãƒ‘ã‚¿ãƒ¼ãƒ³ã€‚

### 1. Command ãƒ‘ã‚¿ãƒ¼ãƒ³ã®æ¦‚è¦

- **Command**: æ“ä½œã‚’è¡¨ç¾ã™ã‚‹ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹
  - ã“ã®ã‚³ãƒ¼ãƒ‰ã§ã¯ `DiscountCommand` ãŒè©²å½“
- **ConcreteCommand**: `Command` ã‚’å®Ÿè£…ã—ã€å…·ä½“çš„ãªæ“ä½œã‚’å®šç¾©ã™ã‚‹ã‚¯ãƒ©ã‚¹
  - ã“ã®ã‚³ãƒ¼ãƒ‰ã§ã¯ `StudentDiscountCommand`, `MemberDiscountCommand`, `VIPDiscountCommand`, `NoDiscountCommand` ãŒè©²å½“
- **Invoker**: `Command` ã‚’å®Ÿè¡Œã™ã‚‹å½¹å‰²ã‚’æŒã¤ã‚¯ãƒ©ã‚¹
  - ã“ã®ã‚³ãƒ¼ãƒ‰ã§ã¯ `DiscountExecutor` ãŒè©²å½“
- **Client**: `Command` ã‚’ç”Ÿæˆã—ã€`Invoker` ã«æ¸¡ã™å½¹å‰²ã‚’æŒã¤
  - ã“ã®ã‚³ãƒ¼ãƒ‰ã§ã¯ `switch` æ–‡ã§ `DiscountCommand` ã‚’ç”Ÿæˆã—ã€`DiscountExecutor` ã«æ¸¡ã—ã¦ã„ã‚‹éƒ¨åˆ†ãŒè©²å½“

### 2. ä¸»ãªã‚¯ãƒ©ã‚¹ã¨ãã®å½¹å‰²

- `DiscountCommand`
  - å‰²å¼•è¨ˆç®—ã®å…±é€šã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹
  - `execute(basePrice: number): number` ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å®šç¾©
- `StudentDiscountCommand`, `MemberDiscountCommand`, `VIPDiscountCommand`, `NoDiscountCommand`
  - `DiscountCommand` ã‚’å®Ÿè£…ã—ãŸå…·ä½“çš„ãªã‚³ãƒãƒ³ãƒ‰ã‚¯ãƒ©ã‚¹
  - å„ã‚¯ãƒ©ã‚¹ã§ç•°ãªã‚‹å‰²å¼•ç‡ã‚’é©ç”¨
- `DiscountExecutor`
  - `Invoker` ã‚¯ãƒ©ã‚¹
  - `setCommand` ãƒ¡ã‚½ãƒƒãƒ‰ã§ã‚³ãƒãƒ³ãƒ‰ã‚’è¨­å®šã—ã€`run` ãƒ¡ã‚½ãƒƒãƒ‰ã§ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œ
- `Client`
  - `switch` æ–‡ã§ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¿ã‚¤ãƒ—ã«å¿œã˜ãŸã‚³ãƒãƒ³ãƒ‰ã‚’ç”Ÿæˆã—ã€`DiscountExecutor` ã«æ¸¡ã™

### 3. UML ã‚¯ãƒ©ã‚¹å›³

```mermaid
classDiagram
    class DiscountCommand {
        <<interface>>
        +execute(basePrice: number): number
    }

    class StudentDiscountCommand {
        +execute(basePrice: number): number
    }

    class MemberDiscountCommand {
        +execute(basePrice: number): number
    }

    class VIPDiscountCommand {
        +execute(basePrice: number): number
    }

    class NoDiscountCommand {
        +execute(basePrice: number): number
    }

    class DiscountExecutor {
        -command: DiscountCommand
        +setCommand(command: DiscountCommand): void
        +run(basePrice: number): number
    }

    DiscountCommand <|.. StudentDiscountCommand
    DiscountCommand <|.. MemberDiscountCommand
    DiscountCommand <|.. VIPDiscountCommand
    DiscountCommand <|.. NoDiscountCommand
    DiscountExecutor --> DiscountCommand
```

### 4. Command ãƒ‘ã‚¿ãƒ¼ãƒ³ã®åˆ©ç‚¹

- **æ“ä½œã®ã‚«ãƒ—ã‚»ãƒ«åŒ–**: æ“ä½œã‚’ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¨ã—ã¦è¡¨ç¾ã™ã‚‹ã“ã¨ã§ã€æ“ä½œã®å®Ÿè¡Œã‚’é…å»¶ã•ã›ãŸã‚Šã€ã‚­ãƒ¥ãƒ¼ã«ä¿å­˜ã—ãŸã‚Šã§ãã‚‹ã€‚
- **æŸ”è»Ÿæ€§**: æ–°ã—ã„æ“ä½œã‚’è¿½åŠ ã™ã‚‹å ´åˆã‚‚ã€`DiscountCommand` ã‚’å®Ÿè£…ã™ã‚‹ã ã‘ã§å¯¾å¿œå¯èƒ½ã€‚
- **Invoker ã®æ±ç”¨æ€§**: `DiscountExecutor` ã¯ã©ã®ã‚³ãƒãƒ³ãƒ‰ã§ã‚‚å®Ÿè¡Œå¯èƒ½ã§ã€æ±ç”¨æ€§ãŒé«˜ã„ã€‚

ã“ã®è¨­è¨ˆã¯ã€æ“ä½œã‚’ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¨ã—ã¦æ‰±ã†ã“ã¨ã§ã€æŸ”è»Ÿæ€§ã¨æ‹¡å¼µæ€§ã‚’å‘ä¸Šã•ã›ã‚‹ã€‚ç‰¹ã«ã€æ“ä½œã®åˆ‡ã‚Šæ›¿ãˆã‚„å±¥æ­´ç®¡ç†ãŒå¿…è¦ãªå ´é¢ã§æœ‰åŠ¹ã«æ©Ÿèƒ½ã™ã‚‹ã€‚
