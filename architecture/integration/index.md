# 3. Integration Styles（通信・インテグレーション）

Integration Styles は、**サービス同士・外部システムとどのように通信し、連携するか** を定めるアーキテクチャ層です。

- 同期 / 非同期、API / メッセージング
- 整合性モデル（強整合／最終整合）、エラーハンドリング
- 分散システム特有の問題（リトライ・冪等性・可観測性）

---

## 3.1 このカテゴリが扱う問題

- サービス同士の通信方式をどう選ぶか
- 同期 API の遅延・スケール問題
- イベント駆動の複雑さ
- サーガによる分散トランザクションの扱い
- API 境界の契約（Contract）管理

---

## 3.2 Integration Styles の代表スタイル

### ● REST / gRPC / GraphQL

- 同期通信の基本方式
- REST：最も広く普及、CRUD 向け
- gRPC：高速、型安全、マイクロサービス向け
- GraphQL：フロントエンド最適化（BFF と相性が良い）

### ● Event-Driven Architecture（EDA）

- 非同期イベントで疎結合化
- 高スケール／高可用構成に向く
- ただし可観測性と整合性の複雑度は上がる

### ● Saga Pattern（オーケストレーション／コレオグラフィ）

- 分散トランザクションの制御
- 決済・予約など「複数サービスをまたぐ整合性」に必須

### ● API Gateway / BFF

- クライアント向け API の統合と最適化
- 認証・ルーティング・レート制限を集約

### ● Service Mesh

- 通信をアプリから分離し、ネットワークレイヤで制御
- mTLS, リトライ, Circuit Breaker, トレーシングなどを自動化

---

## 3.3 このカテゴリの読み方

1. 同期/非同期の使い分け
2. “整合性”と“遅延”のトレードオフ
3. BFF や Mesh による複雑さの吸収レイヤの役割

---

## 3.4 他の階層との関係

- **System Topologies** と最も強く結びつく
- **Data Architecture（CQRS, ES）** はほぼ EDA とセット
- **Cross-cutting**（SLO/Observability）は通信可視化に直結
